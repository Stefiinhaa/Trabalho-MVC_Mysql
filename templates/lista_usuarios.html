<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Painel de Usuários</title>
    <!-- NOTA: Coloque o caminho para seu ícone aqui se tiver um -->
    <link rel="icon" href="{{ url_for('static', filename='img/Loginho2.png') }}" type="image/png">
    <style>
        /* Estilos base (idênticos ao que você forneceu) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; height: 100vh; background-color: #f4f7f6; overflow: hidden; }

        /* Sidebar styles */
        .sidebar { width: 250px; display: flex; flex-direction: column; justify-content: space-between; background-color: #5ce1e6; box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1); padding-top: 20px; position: fixed; height: 100%; left: 0; top: 0; z-index: 1001; transition: width 0.3s ease; }
        .sidebar.collapsed { width: 70px; }
        .logo { text-align: center; padding: 20px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); transition: opacity 0.3s ease; }
        .sidebar.collapsed .logo { opacity: 0; height: 0; padding: 0; }
        .logo img { max-width: 150px; height: auto; }
        .menu { display: flex; flex-direction: column; gap: 5px; padding: 20px 0; flex-grow: 1; }
        .menu-item { display: flex; align-items: center; gap: 12px; padding: 12px 25px; color: #333; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-decoration: none; white-space: nowrap; overflow: hidden; }
        .sidebar.collapsed .menu-item { justify-content: center; padding: 12px 0; }
        .menu-item span { transition: opacity 0.2s ease; }
        .sidebar.collapsed .menu-item span { opacity: 0; width: 0; }
        .menu-item svg { width: 22px; height: 22px; fill: #333; transition: fill 0.3s ease; }
        .menu-item:hover { background-color: rgba(255, 255, 255, 0.2); color: #1a1a1a; transform: translateX(5px); }
        .sidebar.collapsed .menu-item:hover { transform: none; }
        .menu-item.selected { background: linear-gradient(to right, #0047a3, #3ac0dd); color: white; box-shadow: 3px 0 8px rgba(0, 0, 0, 0.2); }
        .menu-item.selected svg { fill: white; }
        .menu-bottom { text-align: center; padding: 15px 0; border-top: 1px solid rgba(255, 255, 255, 0.2); cursor: pointer; }
        .menu-bottom svg { width: 28px; height: 28px; fill: #333; }
        
        /* Main content area */
        .content { flex: 1; margin-left: 250px; padding-top: 60px; position: relative; overflow-y: auto; transition: margin-left 0.3s ease; }
        .content.shifted { margin-left: 70px; }
        .header { width: calc(100% - 250px); height: 60px; background: linear-gradient(to right, #0047a3, #3ac0dd); color: white; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; font-size: 22px; font-weight: bold; position: fixed; top: 0; left: 250px; z-index: 1000; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); transition: left 0.3s ease, width 0.3s ease; }
        .header.shifted { left: 70px; width: calc(100% - 70px); }
        .btn-novo-cadastro { background-color: #fff; color: #0047a3; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-size: 1rem; font-weight: 600; transition: all 0.2s ease; }
        .btn-novo-cadastro:hover { background-color: #f0f0f0; transform: scale(1.05); }

        /* Table styles */
        .tabela-container { width: calc(100% - 60px); margin: 30px auto; background-color: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        th { background-color: #0047a3; color: white; padding: 15px; font-size: 14px; text-transform: uppercase; }
        td { padding: 15px; border-bottom: 1px solid #e0e0e0; font-size: 15px; color: #333; }
        tr:nth-child(even) { background-color: #f7f7f7; }
        tr:hover { background-color: #dbeaff; }
        
        /* Action buttons in table */
        .acoes-cell { display: flex; gap: 8px; }
        .acoes-cell a, .acoes-cell button { padding: 8px 12px; border: none; border-radius: 5px; color: white; cursor: pointer; font-size: 14px; text-decoration: none; text-align: center; }
        .btn-editar { background-color: #0bca17; color: #212529; }
        .btn-excluir { background-color: #e60000; }
        .acoes-cell form { margin:0; }

        @media (max-width: 768px) {
            .sidebar { width: 70px; }
            .sidebar .logo { display: none; }
            .menu-item span { display: none; }
            .menu-item { justify-content: center; }
            .content, .header { margin-left: 70px; left: 70px; width: calc(100% - 70px); }
            #sidebarToggle { display: none; }
            .header { padding: 0 15px; font-size: 18px; }
            .btn-novo-cadastro { font-size: 0.8rem; padding: 6px 10px; }
            .tabela-container { width: calc(100% - 20px); padding: 15px; }
        }
    </style>
</head>
<body>

    <div class="sidebar" id="sidebar">
        <div>
            <div class="logo">
                <a href="#">
                    <img src="{{ url_for('static', filename='img/Loginho2.png') }}" alt="Logo">
                </a>
            </div>
            <div class="menu">
   
                <a href="{{ url_for('author.lista_usuarios') }}" class="menu-item selected">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    <span>Usuários</span>
                </a>

                <a href="{{ url_for('author.author') }}" class="menu-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    <span>Cadastrar</span>
                </a>
            </div>
        </div>
        <div class="menu-bottom" id="sidebarToggle">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1z"/></svg>
        </div>
    </div>

    <!-- ===== CONTEÚDO PRINCIPAL ===== -->
    <div class="content" id="mainContent">
        <div class="header" id="mainHeader">
            <span>Contas Registradas</span>
            <a href="{{ url_for('author.author') }}" class="btn-novo-cadastro">Novo Cadastro</a>
        </div>
        
        <div class="tabela-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Telefone</th>
                        <th style="text-align: center;">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for usuario in usuarios %}
                    <tr>
                        <td>{{ usuario.id }}</td>
                        <td>{{ usuario.name }}</td>
                        <td>{{ usuario.email }}</td>
                        <td>{{ usuario.phone }}</td>
                        <td class="acoes-cell">
                            <a href="{{ url_for('author.atualiza_autor', id=usuario.id) }}" class="btn-editar">Editar</a>
                            <form method="POST" action="{{ url_for('author.delete_author', author_id=usuario.id) }}" onsubmit="return confirm('Tem certeza que deseja excluir este usuário?');">
                                <button type="submit" class="btn-excluir">Excluir</button>
                            </form>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5" style="text-align: center;">Nenhum usuário cadastrado.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const sidebar = document.getElementById("sidebar");
            const sidebarToggle = document.getElementById("sidebarToggle");
            const mainContent = document.getElementById("mainContent");
            const mainHeader = document.getElementById("mainHeader");

            const isSidebarCollapsed = localStorage.getItem("sidebarCollapsed") === "true";
            if (isSidebarCollapsed) {
                sidebar.classList.add("collapsed");
                mainContent.classList.add("shifted");
                mainHeader.classList.add("shifted");
            }

            sidebarToggle.addEventListener("click", () => {
                sidebar.classList.toggle("collapsed");
                mainContent.classList.toggle("shifted");
                mainHeader.classList.toggle("shifted");

                const currentIsCollapsed = sidebar.classList.contains("collapsed");
                localStorage.setItem("sidebarCollapsed", currentIsCollapsed);
            });
        });
    </script>
</body>
</html>
